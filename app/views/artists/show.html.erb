<h1><%=@artist.name%></h1>

<%if current_user.artists.include?(@artist)%>
<%=button_to "Edit Your Artist", edit_artist_path(@artist), method: 'get'%>
<%=link_to "Delete Your Artist", artist_path(@artist), method: 'delete'%>
<%=link_to "Add Admin", new_user_artist_path%>
<h5>What's on your mind?</h5>
<%=form_for @post do |f| %>
<%=f.hidden_field :artist_id, value: @artist.id%>
<%=f.label :content%>
<%=f.text_area  :content%>
<%=f.file_field :media%>
<%=f.submit "Create Post"%>
<%end%>
<%end%>

<% if @artist.image_url%>
    <%=image_tag @artist.image_url, class: "icon"%>
<%end%>

<%if @artist.avatar.attached?%>
    <%=image_tag @artist.avatar, class: "headshot"%>
<%end%>


<p><%=@artist.description%></p>


<% if @artist.genres %>
    <p>Genres:</p>
    <%@artist.genres.each do |genre|%>
        <p><%=genre.name%></p>
    <%end%>
<%end%>


<div class = "artist-posts">
    <h4>Posts:</h4>
    <% if @artist.posts %>
        <% @artist.posts.each do |post|%>
        <div>
            <p><%=post.content%></p>
            <%if post.media.attached?%>
                <%if post.media.blob.content_type.include?("image" || "jpeg")%>
                <%=image_tag post.media%>
                <% elsif post.media.blob.content_type.include?("video")%>
                <video src='<%=rails_blob_path(post.media)%>' type="video/mp4" controls>
                </video>
                <%end%>
            <%end%>
        </div>
        <%end%>
    <%end%>
</div>


<div class = "artist-bookings">
    <h4>Upcoming Events:</h4>
    <% if @artist.bookings %>
        <%@artist.bookings.each do |booking|%>
            <div class="tile">
                    <p><%=booking.title%></p>
                    <p><%=booking.date_format(booking.start_date)%></p>
                    <p><%=booking.time%></p>
                    <p><%=booking.description%></p>
            </div>
        <%end%>
    <%end%>
</div>

<h2>Endorsements:</h2>







<h2> Shows with this Artist: </h2>
<%= render './bookings/calendar' %>

<h2> Places this Artist has booked:</h2>
<%= render './venues/list_tiles' %>